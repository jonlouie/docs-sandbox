<h1>
<a id="user-content-entity-framework-to-ef-core-porting-cheat-sheet" class="anchor" href="#entity-framework-to-ef-core-porting-cheat-sheet" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Entity Framework to EF Core Porting Cheat Sheet</h1>
<p>Overview of porting Entity Framework to EF Core based on commonly-used features and APIs.</p>
<hr>
<h2>
<a id="user-content-table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Table of Contents</h2>
<ul>
<li><a href="#required-changes">Required Changes</a></li>
<li><a href="#dbcontext-changes">DbContext Changes</a></li>
<li><a href="#dbmodelbuilder-changes">DbModelBuilder Changes</a></li>
<li><a href="#data-access-and-tracking-changes">Data Access and Tracking Changes</a></li>
<li><a href="#missing-features">Missing Features</a></li>
</ul>
<hr>
<br> 

<h2>
<a id="user-content-required-changes" class="anchor" href="#required-changes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Required Changes</h2>
<table>
  
    
    
    
  
	<tr>
		<th>Description</th>
		<th>EF Example</th>
		<th>EF Core Example</th>
 	</tr>
  <tr>
    <td>
      Replace Entity Framework namespace
      <br><br>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">using</span> <span class="pl-en">System</span>.<span class="pl-en">Data</span>.<span class="pl-en">Entity</span>;
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">EntityFrameworkCore</span>;
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b><code>web.config</code> and <code>app.config</code> replaced by <code>appsettings.json</code></b>
    </td>
    <td>
      <div class="highlight highlight-text-xml"><pre>
&lt;<span class="pl-ent">configuration</span>&gt;
  &lt;<span class="pl-ent">connectionStrings</span>&gt;
    &lt;<span class="pl-ent">add</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>myConnection<span class="pl-pds">"</span></span> <span class="pl-e">connectionString</span>=<span class="pl-s"><span class="pl-pds">"</span>server=localhost;database=mydatabase;<span class="pl-pds">"</span></span> /&gt;
  &lt;/<span class="pl-ent">connectionStrings</span>&gt;
&lt;/<span class="pl-ent">configuration</span>&gt;
      </pre></div>
    </td>
    <td>
      <code>appsettings.json</code>
      <div class="highlight highlight-source-json"><pre>
{
  <span class="pl-s"><span class="pl-pds">"</span>ConnectionStrings<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>DefaultConnection<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Server=(localdb)<span class="pl-cce">\\</span>MSSQLLocalDB;Database=MyDatabase;Trusted_Connection=True;<span class="pl-pds">"</span></span>
  },
}
      </pre></div>
      <code>startup.cs</code>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">Extensions</span>.<span class="pl-en">Configuration</span>;
<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">ConfigureServices</span>(<span class="pl-en">IServiceCollection</span> <span class="pl-smi">services</span>)
{
<span class="pl-smi">services</span>.<span class="pl-en">AddDbContext</span>(<span class="pl-smi">options</span> <span class="pl-k">=&gt;</span>
<span class="pl-smi">options</span>.<span class="pl-en">UseSqlServer</span>(<span class="pl-smi">Configuration</span>.<span class="pl-en">GetConnectionString</span>(<span class="pl-s"><span class="pl-pds">"</span>DefaultConnection<span class="pl-pds">"</span></span>)));
}</pre></div>
</td>
  </tr>
  <tr>
    <td>
      <b>Spatial data types</b>
      <br>
      Requires Nuget package: <code>NetTopologySuite</code>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">SqlServer</span>.<span class="pl-en">Types</span>;
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">using</span> <span class="pl-en">NetTopologySuite</span>.<span class="pl-en">Geometries</span>;

<span class="pl-smi">optionsBuilder</span>.<span class="pl-en">UseSqlServer</span>(<span class="pl-smi">connectionString</span>, <span class="pl-smi">options</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">options</span>.<span class="pl-en">UseNetTopologySuite</span>());
      </pre></div>
    </td>
  </tr>

</table>
<hr>

<h2>
<a id="user-content-dbcontext-changes" class="anchor" href="#dbcontext-changes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>DbContext Changes</h2>
<p>Required changes for the DbContext class</p>
<table>
  
    
    
    
  
	<tr>
		<th>Description</th>
		<th>EF Example</th>
		<th>EF Core Example</th>
 	</tr>
  <tr>
    <td>
      <b>Connection strings</b> 
      <br>
      No longer passed into the base constructor. Set the connection string with the <code>DbContextOptionsBuilder</code> class.
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">public</span> <span class="pl-en">MyIssueTrackingContext</span>(<span class="pl-k">string</span> <span class="pl-smi">nameOrConnectionString</span>) 
    : <span class="pl-k">base</span>(<span class="pl-smi">nameOrConnectionString</span>) 
{
}
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">private</span> <span class="pl-k">readonly</span> <span class="pl-k">string</span> <span class="pl-smi">_connectionString</span>;
<span class="pl-k">public</span> <span class="pl-en">MyIssueTrackingContext</span>(<span class="pl-k">string</span> <span class="pl-smi">connectionString</span>)
{
    <span class="pl-smi">_connectionString</span> <span class="pl-k">=</span> <span class="pl-smi">connectionString</span>;
}

<span class="pl-k">public</span> <span class="pl-k">override</span> <span class="pl-k">void</span> <span class="pl-en">OnConfiguring</span>(<span class="pl-en">DbContextOptionsBuilder</span> <span class="pl-smi">optionsBuilder</span>)
{
    <span class="pl-smi">optionsBuilder</span>.<span class="pl-en">UseSqlServer</span>(<span class="pl-smi">_connectionString</span>);
}</pre></div>
</td>
  </tr>
  <tr>
    <td>
      <b>Registering database providers</b>
      <br> Provider registration must be done in code using the <code>DbContextOptionsBuilder</code> class.
    </td>
    <td>
(set in web.config/app.config or with <code>DbConfiguration.SetProviderServices()</code> method)
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-c"><span class="pl-c">//</span> .UseSqlServer() registers Sql Server as the provider.</span>
<span class="pl-c"><span class="pl-c">//</span>  Change according the database being used</span>
<span class="pl-c"><span class="pl-c">//</span> Ex: .UseNpgsql() registers Postgres (also requires the </span>
<span class="pl-c"><span class="pl-c">//</span>  Npgsql.EntityFrameworkCore.PostgreSQL Nuget package)</span>
<span class="pl-k">public</span> <span class="pl-k">override</span> <span class="pl-k">void</span> <span class="pl-en">OnConfiguring</span>(<span class="pl-en">DbContextOptionsBuilder</span> <span class="pl-smi">optionsBuilder</span>)
{
    <span class="pl-smi">optionsBuilder</span>.<span class="pl-en">UseSqlServer</span>(<span class="pl-smi">_connectionString</span>);
}
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>Eager Loading</b>
      <br>
      Eagerly loading related entities using a <code>.Select()</code> drill-down has been replaced by <code>.ThenInclude()</code>.
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-smi">context</span>.<span class="pl-smi">Repos</span>.<span class="pl-en">Where</span>(<span class="pl-smi">r</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">r</span>.<span class="pl-smi">Name</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>PortEF6ToCore<span class="pl-pds">"</span></span>)
    .<span class="pl-en">Include</span>(<span class="pl-smi">r</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">r</span>.<span class="pl-smi">CreatedBy</span>)
    .<span class="pl-en">Include</span>(<span class="pl-smi">r</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">r</span>.<span class="pl-smi">Issues</span>.<span class="pl-en">Select</span>(<span class="pl-smi">i</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">i</span>.<span class="pl-smi">Assignees</span>))
    .<span class="pl-en">Include</span>(<span class="pl-smi">r</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">r</span>.<span class="pl-smi">Issues</span>.<span class="pl-en">Select</span>(<span class="pl-smi">i</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">i</span>.<span class="pl-smi">Comments</span>));
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-smi">context</span>.<span class="pl-smi">Repos</span>.<span class="pl-en">Where</span>(<span class="pl-smi">r</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">r</span>.<span class="pl-smi">Name</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>PortEF6ToCore<span class="pl-pds">"</span></span>)
    .<span class="pl-en">Include</span>(<span class="pl-smi">r</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">r</span>.<span class="pl-smi">CreatedBy</span>)
    .<span class="pl-en">Include</span>(<span class="pl-smi">r</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">r</span>.<span class="pl-smi">Issues</span>).<span class="pl-en">ThenInclude</span>(<span class="pl-smi">i</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">i</span>.<span class="pl-smi">Assignees</span>))
    .<span class="pl-en">Include</span>(<span class="pl-smi">r</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">r</span>.<span class="pl-smi">Issues</span>).<span class="pl-en">ThenInclude</span>(<span class="pl-smi">i</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">i</span>.<span class="pl-smi">Comments</span>));
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>Lazy Loading</b>
      <br>
      Must be enabled using the <code>DbContextOptionsBuilder</code> class or with an <code>ILazyLoader</code> service.
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Configuration</span>.<span class="pl-smi">LazyLoadingEnabled</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>; 

<span class="pl-smi">dbContext</span>.<span class="pl-smi">Configuration</span>.<span class="pl-smi">LazyLoadingEnabled</span> <span class="pl-k">=</span> <span class="pl-c1">false</span>; 
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-c"><span class="pl-c">//</span> lazy loading disabled by default</span>
<span class="pl-c"><span class="pl-c">//</span> lazy loading enabled via proxies</span>
<span class="pl-smi">optionsBuilder</span>.<span class="pl-en">UseLazyLoadingProxies</span>()
      </pre></div>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-c"><span class="pl-c">//</span> lazy loading enabled via ILazyLoader service</span>
<span class="pl-c"><span class="pl-c">//</span> requires adding the nuget package Microsoft.EntityFrameworkCore.Abstractions</span>
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">EntityFrameworkCore</span>.<span class="pl-en">Infrastructure</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Repo</span>
{
    <span class="pl-k">private</span> <span class="pl-k">readonly</span> <span class="pl-en">ILazyLoader</span> <span class="pl-smi">_lazyLoader</span>;
    
    <span class="pl-k">public</span> <span class="pl-en">Repo</span>()
    {
    }
    
    <span class="pl-k">public</span> <span class="pl-en">Repo</span>(<span class="pl-en">ILazyLoader</span> <span class="pl-smi">lazyLoader</span>)
    {
        <span class="pl-smi">_lazyLoader</span> <span class="pl-k">=</span> <span class="pl-smi">lazyLoader</span>;
    }
    
    <span class="pl-k">private</span> <span class="pl-en">List</span> <span class="pl-smi">_issues</span>;
    <span class="pl-k">public</span> <span class="pl-en">List</span> <span class="pl-smi">Issues</span>
    {
        <span class="pl-k">get</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">_lazyLoader</span>.<span class="pl-en">Load</span>(<span class="pl-k">this</span>, <span class="pl-k">ref</span> <span class="pl-smi">_issues</span>);
        <span class="pl-k">set</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">_issues</span> <span class="pl-k">=</span> <span class="pl-smi">value</span>;
    }
}
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>Enabling proxy creation</b>
      <br>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-smi">context</span>.<span class="pl-smi">Configuration</span>.<span class="pl-smi">ProxyCreationEnabled</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>;

<span class="pl-smi">context</span>.<span class="pl-smi">Configuration</span>.<span class="pl-smi">ProxyCreationEnabled</span> <span class="pl-k">=</span> <span class="pl-c1">false</span>;
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-c"><span class="pl-c">//</span> proxies are disabled by default</span>
<span class="pl-smi">optionsBuilder</span>.<span class="pl-en">UseLazyLoadingProxies</span>()
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>Logging generated SQL</b>
      <br>
      Logging method is set using the <code>DbContextOptionsBuilder</code> class.
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-smi">Log</span> <span class="pl-k">=</span> <span class="pl-smi">Console</span>.<span class="pl-smi">WriteLine</span>;
      </pre></div>
    </td>
    <td>
    <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">Extensions</span>.<span class="pl-en">Logging</span> <span class="pl-en">namespace</span>;

<span class="pl-smi">optionsBuilder</span>.<span class="pl-en">UseLoggerFactory</span>(<span class="pl-smi">LoggerFactory</span>.<span class="pl-en">Create</span>(<span class="pl-smi">Console</span>.<span class="pl-smi">WriteLine</span>));
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>DbSet.Local property</b>
      <br>
      Now returns a <code>LocalView&lt;TEntity&gt;</code> instead of an <code>ObservableCollection&lt;T&gt;</code>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">var</span> <span class="pl-smi">local</span> <span class="pl-k">=</span> <span class="pl-smi">dbContext</span>.<span class="pl-smi">Repos</span>.<span class="pl-smi">Local</span>;
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">var</span> <span class="pl-smi">local</span> <span class="pl-k">=</span> <span class="pl-smi">dbContext</span>.<span class="pl-smi">Repos</span>.<span class="pl-smi">Local</span>.<span class="pl-en">ToObservableCollection</span>();
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>Database Creation/Deletion</b>
      <br>
      Methods to create/delete a database have been renamed.
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">CreateIfNotExists</span>();
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">Delete</span>();
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">EnsureCreated</span>();
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">EnsureDeleted</span>();
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>Return type of </b><code>DbSet&lt;T&gt;.Add()</code>
      <br>
      Changed from <code>T</code> to <code>EntityEntry&lt;T&gt;</code>
      <br>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-en">Repo</span> <span class="pl-smi">added</span> <span class="pl-k">=</span> <span class="pl-smi">dbContext</span>.<span class="pl-smi">Repos</span>.<span class="pl-en">Add</span>(<span class="pl-smi">repo</span>);
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-en">Repo</span> <span class="pl-smi">added</span> <span class="pl-k">=</span> <span class="pl-smi">dbContext</span>.<span class="pl-smi">Repos</span>.<span class="pl-en">Add</span>(<span class="pl-smi">repo</span>).<span class="pl-smi">Entity</span>;
      </pre></div>
    </td>
  </tr>

</table>
<hr>

<h2>
<a id="user-content-dbmodelbuilder-changes" class="anchor" href="#dbmodelbuilder-changes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>DbModelBuilder Changes</h2>
<p>DbModelBuilder, often used in the <code>DbContext.OnModelCreating()</code> method, requires the following changes:</p>
<table>
  
    
    
    
  
	<tr>
		<th>Description</th>
		<th>EF Example</th>
		<th>EF Core Example</th>
 	</tr>
  <tr>
    <td>
      Renamed <code>DbModelBuilder</code> class to <code>ModelBuilder</code>
      <br><br>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">OnModelCreating</span>(<span class="pl-en">DbModelBuilder</span> <span class="pl-smi">modelBuilder</span>)
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">OnModelCreating</span>(<span class="pl-en">ModelBuilder</span> <span class="pl-smi">modelBuilder</span>)
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>Many:Required relationship configuration</b>
      <br>
      <code>.WithRequired()</code> replaced by <code>.WithOne().IsRequired()</code>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-smi">modelBuilder</span>.<span class="pl-en">Entity</span>&lt;<span class="pl-en">Issue</span>&gt;()
    .<span class="pl-en">HasMany</span>(<span class="pl-smi">i</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">i</span>.<span class="pl-smi">Comments</span>)
    .<span class="pl-en">WithRequired</span>(<span class="pl-smi">c</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">c</span>.<span class="pl-smi">Issue</span>)
    .<span class="pl-en">HasForeignKey</span>(<span class="pl-smi">c</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">c</span>.<span class="pl-smi">IssueId</span>)
    .<span class="pl-en">WillCascadeOnDelete</span>(<span class="pl-c1">true</span>);
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-smi">modelBuilder</span>.<span class="pl-en">Entity</span>&lt;<span class="pl-en">Issue</span>&gt;()
    .<span class="pl-en">HasMany</span>(<span class="pl-smi">i</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">i</span>.<span class="pl-smi">Comments</span>)
    .<span class="pl-en">WithOne</span>(<span class="pl-smi">c</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">c</span>.<span class="pl-smi">Issue</span>)
    .<span class="pl-en">IsRequired</span>(<span class="pl-c1">true</span>)
    .<span class="pl-en">HasForeignKey</span>(<span class="pl-smi">c</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">c</span>.<span class="pl-smi">IssueId</span>)
    .<span class="pl-en">OnDelete</span>(<span class="pl-smi">DeleteBehavior</span>.<span class="pl-smi">Cascade</span>)
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>Delete behavior</b>
      <br>
      <code>.WillCascadeOnDelete()</code> replaced by <code>.OnDelete()</code>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
.<span class="pl-en">WillCascadeOnDelete</span>(<span class="pl-c1">true</span>);
.<span class="pl-en">WillCascadeOnDelete</span>(<span class="pl-c1">false</span>);
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
.<span class="pl-en">OnDelete</span>(<span class="pl-smi">DeleteBehavior</span>.<span class="pl-smi">Cascade</span>);
.<span class="pl-en">OnDelete</span>(<span class="pl-smi">DeleteBehavior</span>.<span class="pl-smi">Restrict</span>);
      </pre></div>
    </td>
  </tr>

<h2></h2>
</table>

<h2>
<a id="user-content-data-access-and-tracking-changes" class="anchor" href="#data-access-and-tracking-changes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Data Access and Tracking Changes</h2>
<p>Changes in how data is accessed and tracked</p>
<table>
  
    
    
    
  
	<tr>
		<th>Description</th>
		<th>EF Example</th>
		<th>EF Core Example</th>
 	</tr>
  <tr>
    <td>
      Renamed <code>DbChangeTracker</code> to <code>ChangeTracker</code>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">DisplayTrackedEntities</span>(<span class="pl-en">DbChangeTracker</span> <span class="pl-smi">changeTracker</span>)
{
}
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">EntityFrameworkCore</span>.<span class="pl-en">ChangeTracking</span>;

<span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">DisplayTrackedEntities</span>(<span class="pl-en">ChangeTracker</span> <span class="pl-smi">changeTracker</span>)
{
}
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      Replaced <code>DbContextTransaction</code> with <code>IDbContextTransaction</code>
      <br>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-en">DbContextTransaction</span> <span class="pl-smi">transaction</span> <span class="pl-k">=</span> <span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">BeginTransaction</span>();
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">EntityFrameworkCore</span>.<span class="pl-en">Storage</span>;

<span class="pl-en">IDbContextTransaction</span> <span class="pl-smi">transaction</span> <span class="pl-k">=</span> <span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">BeginTransaction</span>();
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>Raw SQL Queries (returning entities)</b>
      <br>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-c"><span class="pl-c">//</span> Sql string</span>
<span class="pl-smi">DbSet</span>.<span class="pl-en">SqlQuery</span>(<span class="pl-s"><span class="pl-pds">"</span>SELECT * FROM MyTable<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Parameterized query</span>
<span class="pl-smi">DbSet</span>.<span class="pl-en">SqlQuery</span>(<span class="pl-s"><span class="pl-pds">"</span>SELECT * FROM MyTable WHERE id={0}<span class="pl-pds">"</span></span>, <span class="pl-smi">id</span>);
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-c"><span class="pl-c">//</span> Sql string</span>
<span class="pl-smi">DbSet</span>.<span class="pl-en">FromSqlRaw</span>(<span class="pl-s"><span class="pl-pds">"</span>SELECT * FROM MyTable<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Parameterized query</span>
<span class="pl-smi">DbSet</span>.<span class="pl-en">FromSqlRaw</span>(<span class="pl-s"><span class="pl-pds">"</span>SELECT * FROM MyTable WHERE id={0}<span class="pl-pds">"</span></span>, <span class="pl-smi">id</span>);

<span class="pl-c"><span class="pl-c">//</span> Parameterized query with interpolated string</span>
<span class="pl-smi">DbSet</span>.<span class="pl-en">FromSqlInterpolated</span>(<span class="pl-s"><span class="pl-pds">$"</span>SELECT * FROM MyTable WHERE id={<span class="pl-smi">id</span>}<span class="pl-pds">"</span></span>);
      </pre></div>
</td>
  </tr>
  <tr>
    <td>
      <b>Raw SQL Queries (commands)</b>
      <br>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-c"><span class="pl-c">//</span> Sql string</span>
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">ExecuteSqlCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>sp_UpdateAll<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Parameterized query</span>
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">ExecuteSqlCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>sp_InsertId {0}<span class="pl-pds">"</span></span>, <span class="pl-smi">id</span>);
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-c"><span class="pl-c">//</span> Sql string</span>
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">ExecuteSqlRaw</span>(<span class="pl-s"><span class="pl-pds">"</span>sp_UpdateAll<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Parameterized query</span>
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">ExecuteSqlRaw</span>(<span class="pl-s"><span class="pl-pds">"</span>sp_InsertId {0}<span class="pl-pds">"</span></span>, <span class="pl-smi">id</span>);

<span class="pl-c"><span class="pl-c">//</span> Parameterized query with interpolated string</span>
<span class="pl-smi">dbContext</span>.<span class="pl-smi">Database</span>.<span class="pl-en">ExecuteSqlInterpolated</span>(<span class="pl-s"><span class="pl-pds">$"</span>sp_InsertId {<span class="pl-smi">id</span>}<span class="pl-pds">"</span></span>);
      </pre></div>
    </td>
  </tr>
  <tr>
    <td>
      <b>Compiled queries</b>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">using</span> <span class="pl-en">System</span>.<span class="pl-en">Data</span>.<span class="pl-en">Objects</span>;

<span class="pl-smi">CompiledQuery</span>.<span class="pl-en">Compile</span>&lt;<span class="pl-en">TContext</span>, <span class="pl-en">TParam1</span>, ..., <span class="pl-en">TParamN</span>, <span class="pl-en">TResult</span>&gt;(
    <span class="pl-c"><span class="pl-c">//</span> LINQ query</span>
);
      </pre></div>
    </td>
    <td>
      <div class="highlight highlight-source-cs"><pre>
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">EntityFrameworkCore</span>;

<span class="pl-smi">EF</span>.<span class="pl-en">CompileQuery</span>&lt;<span class="pl-en">TContext</span>, <span class="pl-en">TParam1</span>, ..., <span class="pl-en">TParamN</span>, <span class="pl-en">TResult</span>&gt;(
    <span class="pl-c"><span class="pl-c">//</span> LINQ query</span>
);
      </pre></div>
    </td>
  </tr>

</table>
<hr>

<h2>
<a id="user-content-missing-features" class="anchor" href="#missing-features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Missing Features</h2>
<p>These Entity Framework features are missing from EF Core and may or may not be implemented in the future. If your project uses any of these features, consider using EF v6.3+</p>
<table>
  
    
    
    
  
	<tr>
		<th>Name</th>
		<th>Description</th>
		<th>Implementation Plan</th>
 	</tr>
  <tr>
    <td>
      <b>TPC (Table-per-Concrete)</b>
    </td>
    <td>
      Allows entity classes with an abstract base class to be mapped to separate database tables (abstract base class remains unmapped)
    </td>
    <td>
      On backlog
    </td>
  </tr>
  <tr>
    <td>
      <b>Entity splitting</b>
      <br>
    </td>
    <td>
Allows single entities to be mapped to multiple tables (i.e. a subset of properties mapped to one table, another subset mapped to another table).
    </td>
    <td>
On backlog
    </td>
  </tr>
  <tr>
    <td>
      <b>Visual Designer</b>
      <br>
    </td>
    <td>
GUI-based db modeling tool that automatically generates DbContext and entity classes from a UML diagram. It also includes additional features such as auto-generated CUD stored procedures.
    </td>
    <td>
Not planned
    </td>
  </tr>
  <tr>
    <td>
      <b>ObjectContext class</b>
      <br>
    </td>
    <td>
A low level class used to facilitate data access in a generic manner. It is commonly used when a stored procedure returns multiple result sets that each map to a different entity type.
    </td>
    <td>
Not planned
    </td>
  </tr>

</table>

